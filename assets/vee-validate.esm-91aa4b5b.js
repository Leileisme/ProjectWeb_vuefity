import{p as kn,a as Tn,bb as Un,h as Bn,bc as Dn,B as X,s as zn,v as Ln,aG as $n,o as k,bd as O,L as I,S as hn,be as Pe,a8 as mn,bf as Fe,R as ue,aM as yn,a1 as Ne,aB as ae,bg as Wn,aq as qn,ad as xn,ax as Gn}from"./index-7162acbb.js";const Hn=kn({...Tn(),...Un()},"VForm"),kt=Bn()({name:"VForm",props:Hn(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,n){let{slots:t,emit:i}=n;const a=Dn(e),u=X();function d(c){c.preventDefault(),a.reset()}function h(c){const s=c,V=a.validate();s.then=V.then.bind(V),s.catch=V.catch.bind(V),s.finally=V.finally.bind(V),i("submit",s),s.defaultPrevented||V.then(g=>{var _;let{valid:F}=g;F&&((_=u.value)==null||_.submit())}),s.preventDefault()}return zn(()=>{var c;return Ln("form",{ref:u,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:d,onSubmit:h},[(c=t.default)==null?void 0:c.call(t,a)])}),$n(a,u)}});/**
  * vee-validate v4.12.5
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */function Q(e){return typeof e=="function"}function be(e){return e==null}const pe=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function Xe(e){return Number(e)>=0}function Kn(e){const n=parseFloat(e);return isNaN(n)?e:n}function Yn(e){return typeof e=="object"&&e!==null}function Xn(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function ln(e){if(!Yn(e)||Xn(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}function Se(e,n){return Object.keys(n).forEach(t=>{if(ln(n[t])&&ln(e[t])){e[t]||(e[t]={}),Se(e[t],n[t]);return}e[t]=n[t]}),e}function Ae(e){const n=e.split(".");if(!n.length)return"";let t=String(n[0]);for(let i=1;i<n.length;i++){if(Xe(n[i])){t+=`[${n[i]}]`;continue}t+=`.${n[i]}`}return t}const Jn={};function Qn(e){return Jn[e]}function an(e,n,t){typeof t.value=="object"&&(t.value=C(t.value)),!t.enumerable||t.get||t.set||!t.configurable||!t.writable||n==="__proto__"?Object.defineProperty(e,n,t):e[n]=t.value}function C(e){if(typeof e!="object")return e;var n=0,t,i,a,u=Object.prototype.toString.call(e);if(u==="[object Object]"?a=Object.create(e.__proto__||null):u==="[object Array]"?a=Array(e.length):u==="[object Set]"?(a=new Set,e.forEach(function(d){a.add(C(d))})):u==="[object Map]"?(a=new Map,e.forEach(function(d,h){a.set(C(h),C(d))})):u==="[object Date]"?a=new Date(+e):u==="[object RegExp]"?a=new RegExp(e.source,e.flags):u==="[object DataView]"?a=new e.constructor(C(e.buffer)):u==="[object ArrayBuffer]"?a=e.slice(0):u.slice(-6)==="Array]"&&(a=new e.constructor(e)),a){for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)an(a,i[n],Object.getOwnPropertyDescriptor(e,i[n]));for(n=0,i=Object.getOwnPropertyNames(e);n<i.length;n++)Object.hasOwnProperty.call(a,t=i[n])&&a[t]===e[t]||an(a,t,Object.getOwnPropertyDescriptor(e,t))}return a||e}const Me=Symbol("vee-validate-form"),Zn=Symbol("vee-validate-field-instance"),un=Symbol("Default empty value"),et=typeof window<"u";function Ge(e){return Q(e)&&!!e.__locatorRef}function re(e){return!!e&&Q(e.parse)&&e.__type==="VVTypedSchema"}function Ce(e){return!!e&&Q(e.validate)}function pn(e){return e==="checkbox"||e==="radio"}function nt(e){return pe(e)||Array.isArray(e)}function tt(e){return Array.isArray(e)?e.length===0:pe(e)&&Object.keys(e).length===0}function Re(e){return/^\[.+\]$/i.test(e)}function rt(e){return gn(e)&&e.multiple}function gn(e){return e.tagName==="SELECT"}function it(e){return bn(e)&&e.target&&"submit"in e.target}function bn(e){return e?!!(typeof Event<"u"&&Q(Event)&&e instanceof Event||e&&e.srcElement):!1}function L(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var t,i,a;if(Array.isArray(e)){if(t=e.length,t!=n.length)return!1;for(i=t;i--!==0;)if(!L(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!L(i[1],n.get(i[0])))return!1;return!0}if(on(e)&&on(n))return!(e.size!==n.size||e.name!==n.name||e.lastModified!==n.lastModified||e.type!==n.type);if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(t=e.length,t!=n.length)return!1;for(i=t;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();for(a=Object.keys(e),t=a.length,i=t;i--!==0;){var u=a[i];if(!L(e[u],n[u]))return!1}return!0}return e!==e&&n!==n}function on(e){return et?e instanceof File:!1}function Je(e){return Re(e)?e.replace(/\[|\]/gi,""):e}function U(e,n,t){return e?Re(n)?e[Je(n)]:(n||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((a,u)=>nt(a)&&u in a?a[u]:t,e):t}function x(e,n,t){if(Re(n)){e[Je(n)]=t;return}const i=n.split(/\.|\[(\d+)\]/).filter(Boolean);let a=e;for(let u=0;u<i.length;u++){if(u===i.length-1){a[i[u]]=t;return}(!(i[u]in a)||be(a[i[u]]))&&(a[i[u]]=Xe(i[u+1])?[]:{}),a=a[i[u]]}}function qe(e,n){if(Array.isArray(e)&&Xe(n)){e.splice(Number(n),1);return}pe(e)&&delete e[n]}function sn(e,n){if(Re(n)){delete e[Je(n)];return}const t=n.split(/\.|\[(\d+)\]/).filter(Boolean);let i=e;for(let u=0;u<t.length;u++){if(u===t.length-1){qe(i,t[u]);break}if(!(t[u]in i)||be(i[t[u]]))break;i=i[t[u]]}const a=t.map((u,d)=>U(e,t.slice(0,d).join(".")));for(let u=a.length-1;u>=0;u--)if(tt(a[u])){if(u===0){qe(e,t[0]);continue}qe(a[u-1],t[u-1])}}function ne(e){return Object.keys(e)}function Qe(e,n=void 0){const t=Pe();return(t==null?void 0:t.provides[e])||xn(e,n)}function cn(e,n,t){if(Array.isArray(e)){const i=[...e],a=i.findIndex(u=>L(u,n));return a>=0?i.splice(a,1):i.push(n),i}return L(e,n)?t:n}function dn(e,n=0){let t=null,i=[];return function(...a){return t&&clearTimeout(t),t=setTimeout(()=>{const u=e(...a);i.forEach(d=>d(u)),i=[]},n),new Promise(u=>i.push(u))}}function lt(e,n){return pe(n)&&n.number?Kn(e):e}function He(e,n){let t;return async function(...a){const u=e(...a);t=u;const d=await u;return u!==t?d:(t=void 0,n(d,a))}}function at({get:e,set:n}){const t=X(C(e()));return ue(e,i=>{L(i,t.value)||(t.value=C(i))},{deep:!0}),ue(t,i=>{L(i,e())||n(C(i))},{deep:!0}),t}function Ke(e){return Array.isArray(e)?e:e?[e]:[]}function je(e,n){const t={};for(const i in e)n.includes(i)||(t[i]=e[i]);return t}function ut(e){let n=null,t=[];return function(...i){const a=ae(()=>{if(n!==a)return;const u=e(...i);t.forEach(d=>d(u)),t=[],n=null});return n=a,new Promise(u=>t.push(u))}}function xe(e){if(Vn(e))return e._value}function Vn(e){return"_value"in e}function ot(e){return e.type==="number"||e.type==="range"?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function Ie(e){if(!bn(e))return e;const n=e.target;if(pn(n.type)&&Vn(n))return xe(n);if(n.type==="file"&&n.files){const t=Array.from(n.files);return n.multiple?t:t[0]}if(rt(n))return Array.from(n.options).filter(t=>t.selected&&!t.disabled).map(xe);if(gn(n)){const t=Array.from(n.options).find(i=>i.selected);return t?xe(t):n.value}return ot(n)}function On(e){const n={};return Object.defineProperty(n,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?pe(e)&&e._$$isNormalized?e:pe(e)?Object.keys(e).reduce((t,i)=>{const a=st(e[i]);return e[i]!==!1&&(t[i]=fn(a)),t},n):typeof e!="string"?n:e.split("|").reduce((t,i)=>{const a=ct(i);return a.name&&(t[a.name]=fn(a.params)),t},n):n}function st(e){return e===!0?[]:Array.isArray(e)||pe(e)?e:[e]}function fn(e){const n=t=>typeof t=="string"&&t[0]==="@"?dt(t.slice(1)):t;return Array.isArray(e)?e.map(n):e instanceof RegExp?[e]:Object.keys(e).reduce((t,i)=>(t[i]=n(e[i]),t),{})}const ct=e=>{let n=[];const t=e.split(":")[0];return e.includes(":")&&(n=e.split(":").slice(1).join(":").split(",")),{name:t,params:n}};function dt(e){const n=t=>U(t,e)||t[e];return n.__locatorRef=e,n}function ft(e){return Array.isArray(e)?e.filter(Ge):ne(e).filter(n=>Ge(e[n])).map(n=>e[n])}const vt={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let ht=Object.assign({},vt);const _e=()=>ht;async function An(e,n,t={}){const i=t==null?void 0:t.bails,a={name:(t==null?void 0:t.name)||"{field}",rules:n,label:t==null?void 0:t.label,bails:i??!0,formData:(t==null?void 0:t.values)||{}},d=(await mt(a,e)).errors;return{errors:d,valid:!d.length}}async function mt(e,n){if(re(e.rules)||Ce(e.rules))return pt(n,e.rules);if(Q(e.rules)||Array.isArray(e.rules)){const d={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:n},h=Array.isArray(e.rules)?e.rules:[e.rules],c=h.length,s=[];for(let V=0;V<c;V++){const g=h[V],F=await g(n,d);if(!(typeof F!="string"&&!Array.isArray(F)&&F)){if(Array.isArray(F))s.push(...F);else{const B=typeof F=="string"?F:Sn(d);s.push(B)}if(e.bails)return{errors:s}}}return{errors:s}}const t=Object.assign(Object.assign({},e),{rules:On(e.rules)}),i=[],a=Object.keys(t.rules),u=a.length;for(let d=0;d<u;d++){const h=a[d],c=await gt(t,n,{name:h,params:t.rules[h]});if(c.error&&(i.push(c.error),e.bails))return{errors:i}}return{errors:i}}function yt(e){return!!e&&e.name==="ValidationError"}function _n(e){return{__type:"VVTypedSchema",async parse(t){var i;try{return{output:await e.validate(t,{abortEarly:!1}),errors:[]}}catch(a){if(!yt(a))throw a;if(!(!((i=a.inner)===null||i===void 0)&&i.length)&&a.errors.length)return{errors:[{path:a.path,errors:a.errors}]};const u=a.inner.reduce((d,h)=>{const c=h.path||"";return d[c]||(d[c]={errors:[],path:c}),d[c].errors.push(...h.errors),d},{});return{errors:Object.values(u)}}}}}async function pt(e,n){const i=await(re(n)?n:_n(n)).parse(e),a=[];for(const u of i.errors)u.errors.length&&a.push(...u.errors);return{errors:a}}async function gt(e,n,t){const i=Qn(t.name);if(!i)throw new Error(`No such validator '${t.name}' exists.`);const a=bt(t.params,e.formData),u={field:e.label||e.name,name:e.name,label:e.label,value:n,form:e.formData,rule:Object.assign(Object.assign({},t),{params:a})},d=await i(n,a,u);return typeof d=="string"?{error:d}:{error:d?void 0:Sn(u)}}function Sn(e){const n=_e().generateMessage;return n?n(e):"Field is invalid"}function bt(e,n){const t=i=>Ge(i)?i(n):i;return Array.isArray(e)?e.map(t):Object.keys(e).reduce((i,a)=>(i[a]=t(e[a]),i),{})}async function Vt(e,n){const i=await(re(e)?e:_n(e)).parse(C(n)),a={},u={};for(const d of i.errors){const h=d.errors,c=(d.path||"").replace(/\["(\d+)"\]/g,(s,V)=>`[${V}]`);a[c]={valid:!h.length,errors:h},h.length&&(u[c]=h[0])}return{valid:!i.errors.length,results:a,errors:u,values:i.value}}async function Ot(e,n,t){const a=ne(e).map(async s=>{var V,g,F;const _=(V=t==null?void 0:t.names)===null||V===void 0?void 0:V[s],B=await An(U(n,s),e[s],{name:(_==null?void 0:_.name)||s,label:_==null?void 0:_.label,values:n,bails:(F=(g=t==null?void 0:t.bailsMap)===null||g===void 0?void 0:g[s])!==null&&F!==void 0?F:!0});return Object.assign(Object.assign({},B),{path:s})});let u=!0;const d=await Promise.all(a),h={},c={};for(const s of d)h[s.path]={valid:s.valid,errors:s.errors},s.valid||(u=!1,c[s.path]=s.errors[0]);return{valid:u,results:h,errors:c}}let vn=0;function At(e,n){const{value:t,initialValue:i,setInitialValue:a}=_t(e,n.modelValue,n.form);if(!n.form){let F=function(_){var B;"value"in _&&(t.value=_.value),"errors"in _&&s(_.errors),"touched"in _&&(g.touched=(B=_.touched)!==null&&B!==void 0?B:g.touched),"initialValue"in _&&a(_.initialValue)};const{errors:c,setErrors:s}=jt(),V=vn>=Number.MAX_SAFE_INTEGER?0:++vn,g=Et(t,i,c,n.schema);return{id:V,path:e,value:t,initialValue:i,meta:g,flags:{pendingUnmount:{[V]:!1},pendingReset:!1},errors:c,setState:F}}const u=n.form.createPathState(e,{bails:n.bails,label:n.label,type:n.type,validate:n.validate,schema:n.schema}),d=k(()=>u.errors);function h(c){var s,V,g;"value"in c&&(t.value=c.value),"errors"in c&&((s=n.form)===null||s===void 0||s.setFieldError(I(e),c.errors)),"touched"in c&&((V=n.form)===null||V===void 0||V.setFieldTouched(I(e),(g=c.touched)!==null&&g!==void 0?g:!1)),"initialValue"in c&&a(c.initialValue)}return{id:Array.isArray(u.id)?u.id[u.id.length-1]:u.id,path:e,value:t,errors:d,meta:u,initialValue:i,flags:u.__flags,setState:h}}function _t(e,n,t){const i=X(I(n));function a(){return t?U(t.initialValues.value,I(e),I(i)):I(i)}function u(s){if(!t){i.value=s;return}t.setFieldInitialValue(I(e),s,!0)}const d=k(a);if(!t)return{value:X(a()),initialValue:d,setInitialValue:u};const h=St(n,t,d,e);return t.stageInitialValue(I(e),h,!0),{value:k({get(){return U(t.values,I(e))},set(s){t.setFieldValue(I(e),s,!1)}}),initialValue:d,setInitialValue:u}}function St(e,n,t,i){return Fe(e)?I(e):e!==void 0?e:U(n.values,I(i),I(t))}function Et(e,n,t,i){var a,u;const d=(u=(a=i==null?void 0:i.describe)===null||a===void 0?void 0:a.call(i).required)!==null&&u!==void 0?u:!1,h=Ne({touched:!1,pending:!1,valid:!0,required:d,validated:!!I(t).length,initialValue:k(()=>I(n)),dirty:k(()=>!L(I(e),I(n)))});return ue(t,c=>{h.valid=!c.length},{immediate:!0,flush:"sync"}),h}function jt(){const e=X([]);return{errors:e,setErrors:n=>{e.value=Ke(n)}}}function Tt(e,n,t){return pn(t==null?void 0:t.type)?Ft(e,n,t):En(e,n,t)}function En(e,n,t){const{initialValue:i,validateOnMount:a,bails:u,type:d,checkedValue:h,label:c,validateOnValueUpdate:s,uncheckedValue:V,controlled:g,keepValueOnUnmount:F,syncVModel:_,form:B}=wt(t),ie=g?Qe(Me):void 0,j=B||ie,J=k(()=>Ae(O(e))),K=k(()=>{if(O(j==null?void 0:j.schema))return;const S=I(n);return Ce(S)||re(S)||Q(S)||Array.isArray(S)?S:On(S)}),{id:de,value:oe,initialValue:y,meta:v,setState:A,errors:w,flags:N}=At(J,{modelValue:i,form:j,bails:u,label:c,type:d,validate:K.value?ve:void 0,schema:re(n)?n:void 0}),E=k(()=>w.value[0]);_&&Nt({value:oe,prop:_,handleChange:$,shouldValidate:()=>s&&!N.pendingReset});const z=(m,S=!1)=>{v.touched=!0,S&&fe()};async function Z(m){var S,R;if(j!=null&&j.validateSchema){const{results:M}=await j.validateSchema(m);return(S=M[O(J)])!==null&&S!==void 0?S:{valid:!0,errors:[]}}return K.value?An(oe.value,K.value,{name:O(J),label:O(c),values:(R=j==null?void 0:j.values)!==null&&R!==void 0?R:{},bails:u}):{valid:!0,errors:[]}}const fe=He(async()=>(v.pending=!0,v.validated=!0,Z("validated-only")),m=>(N.pendingUnmount[G.id]||(A({errors:m.errors}),v.pending=!1,v.valid=m.valid),m)),se=He(async()=>Z("silent"),m=>(v.valid=m.valid,m));function ve(m){return(m==null?void 0:m.mode)==="silent"?se():fe()}function $(m,S=!0){const R=Ie(m);Ve(R,S)}hn(()=>{if(a)return fe();(!j||!j.validateSchema)&&se()});function ke(m){v.touched=m}function he(m){var S;const R=m&&"value"in m?m.value:y.value;A({value:C(R),initialValue:C(R),touched:(S=m==null?void 0:m.touched)!==null&&S!==void 0?S:!1,errors:(m==null?void 0:m.errors)||[]}),v.pending=!1,v.validated=!1,se()}const me=Pe();function Ve(m,S=!0){oe.value=me&&_?lt(m,me.props.modelModifiers):m,(S?fe:se)()}function Ee(m){A({errors:Array.isArray(m)?m:[m]})}const Ze=k({get(){return oe.value},set(m){Ve(m,s)}}),G={id:de,name:J,label:c,value:Ze,meta:v,errors:w,errorMessage:E,type:d,checkedValue:h,uncheckedValue:V,bails:u,keepValueOnUnmount:F,resetField:he,handleReset:()=>he(),validate:ve,handleChange:$,handleBlur:z,setState:A,setTouched:ke,setErrors:Ee,setValue:Ve};if(mn(Zn,G),Fe(n)&&typeof I(n)!="function"&&ue(n,(m,S)=>{L(m,S)||(v.validated?fe():se())},{deep:!0}),!j)return G;const Te=k(()=>{const m=K.value;return!m||Q(m)||Ce(m)||re(m)||Array.isArray(m)?{}:Object.keys(m).reduce((S,R)=>{const M=ft(m[R]).map(ce=>ce.__locatorRef).reduce((ce,le)=>{const ee=U(j.values,le)||j.values[le];return ee!==void 0&&(ce[le]=ee),ce},{});return Object.assign(S,M),S},{})});return ue(Te,(m,S)=>{if(!Object.keys(m).length)return;!L(m,S)&&(v.validated?fe():se())}),yn(()=>{var m;const S=(m=O(G.keepValueOnUnmount))!==null&&m!==void 0?m:O(j.keepValuesOnUnmount),R=O(J);if(S||!j||N.pendingUnmount[G.id]){j==null||j.removePathState(R,de);return}N.pendingUnmount[G.id]=!0;const M=j.getPathState(R);if(Array.isArray(M==null?void 0:M.id)&&(M!=null&&M.multiple)?M!=null&&M.id.includes(G.id):(M==null?void 0:M.id)===G.id){if(M!=null&&M.multiple&&Array.isArray(M.value)){const le=M.value.findIndex(ee=>L(ee,O(G.checkedValue)));if(le>-1){const ee=[...M.value];ee.splice(le,1),j.setFieldValue(R,ee)}Array.isArray(M.id)&&M.id.splice(M.id.indexOf(G.id),1)}else j.unsetPathValue(O(J));j.removePathState(R,de)}}),G}function wt(e){const n=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,label:void 0,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,syncVModel:!1,controlled:!0}),t=!!(e!=null&&e.syncVModel),i=typeof(e==null?void 0:e.syncVModel)=="string"?e.syncVModel:(e==null?void 0:e.modelPropName)||"modelValue",a=t&&!("initialValue"in(e||{}))?Ye(Pe(),i):e==null?void 0:e.initialValue;if(!e)return Object.assign(Object.assign({},n()),{initialValue:a});const u="valueProp"in e?e.valueProp:e.checkedValue,d="standalone"in e?!e.standalone:e.controlled,h=(e==null?void 0:e.modelPropName)||(e==null?void 0:e.syncVModel)||!1;return Object.assign(Object.assign(Object.assign({},n()),e||{}),{initialValue:a,controlled:d??!0,checkedValue:u,syncVModel:h})}function Ft(e,n,t){const i=t!=null&&t.standalone?void 0:Qe(Me),a=t==null?void 0:t.checkedValue,u=t==null?void 0:t.uncheckedValue;function d(h){const c=h.handleChange,s=k(()=>{const g=O(h.value),F=O(a);return Array.isArray(g)?g.findIndex(_=>L(_,F))>=0:L(F,g)});function V(g,F=!0){var _,B;if(s.value===((_=g==null?void 0:g.target)===null||_===void 0?void 0:_.checked)){F&&h.validate();return}const ie=O(e),j=i==null?void 0:i.getPathState(ie),J=Ie(g);let K=(B=O(a))!==null&&B!==void 0?B:J;i&&(j!=null&&j.multiple)&&j.type==="checkbox"?K=cn(U(i.values,ie)||[],K,void 0):(t==null?void 0:t.type)==="checkbox"&&(K=cn(O(h.value),K,O(u))),c(K,F)}return Object.assign(Object.assign({},h),{checked:s,checkedValue:a,uncheckedValue:u,handleChange:V})}return d(En(e,n,t))}function Nt({prop:e,value:n,handleChange:t,shouldValidate:i}){const a=Pe();if(!a||!e)return;const u=typeof e=="string"?e:"modelValue",d=`update:${u}`;u in a.props&&(ue(n,h=>{L(h,Ye(a,u))||a.emit(d,h)}),ue(()=>Ye(a,u),h=>{if(h===un&&n.value===void 0)return;const c=h===un?void 0:h;L(c,n.value)||t(c,i())}))}function Ye(e,n){if(e)return e.props[n]}let Ct=0;const we=["bails","fieldsCount","id","multiple","type","validate"];function jn(e){const n=Object.assign({},O((e==null?void 0:e.initialValues)||{})),t=I(e==null?void 0:e.validationSchema);return t&&re(t)&&Q(t.cast)?C(t.cast(n)||{}):C(n)}function Ut(e){var n;const t=Ct++;let i=0;const a=X(!1),u=X(!1),d=X(0),h=[],c=Ne(jn(e)),s=X([]),V=X({}),g=X({}),F=ut(()=>{g.value=s.value.reduce((l,r)=>(l[Ae(O(r.path))]=r,l),{})});function _(l,r){const o=$(l);if(!o){typeof l=="string"&&(V.value[Ae(l)]=Ke(r));return}if(typeof l=="string"){const f=Ae(l);V.value[f]&&delete V.value[f]}o.errors=Ke(r),o.valid=!o.errors.length}function B(l){ne(l).forEach(r=>{_(r,l[r])})}e!=null&&e.initialErrors&&B(e.initialErrors);const ie=k(()=>{const l=s.value.reduce((r,o)=>(o.errors.length&&(r[o.path]=o.errors),r),{});return Object.assign(Object.assign({},V.value),l)}),j=k(()=>ne(ie.value).reduce((l,r)=>{const o=ie.value[r];return o!=null&&o.length&&(l[r]=o[0]),l},{})),J=k(()=>s.value.reduce((l,r)=>(l[r.path]={name:r.path||"",label:r.label||""},l),{})),K=k(()=>s.value.reduce((l,r)=>{var o;return l[r.path]=(o=r.bails)!==null&&o!==void 0?o:!0,l},{})),de=Object.assign({},(e==null?void 0:e.initialErrors)||{}),oe=(n=e==null?void 0:e.keepValuesOnUnmount)!==null&&n!==void 0?n:!1,{initialValues:y,originalInitialValues:v,setInitialValues:A}=Pt(s,c,e),w=It(s,c,v,j),N=k(()=>s.value.reduce((l,r)=>{const o=U(c,r.path);return x(l,r.path,o),l},{})),E=e==null?void 0:e.validationSchema;function z(l,r){var o,f;const b=k(()=>U(y.value,O(l))),p=g.value[O(l)],P=(r==null?void 0:r.type)==="checkbox"||(r==null?void 0:r.type)==="radio";if(p&&P){p.multiple=!0;const te=i++;return Array.isArray(p.id)?p.id.push(te):p.id=[p.id,te],p.fieldsCount++,p.__flags.pendingUnmount[te]=!1,p}const W=k(()=>U(c,O(l))),D=O(l),H=he.findIndex(te=>te===D);H!==-1&&he.splice(H,1);const T=k(()=>{var te,Oe,Le,rn,$e,We;return re(E)?(Le=(Oe=(te=E).describe)===null||Oe===void 0?void 0:Oe.call(te,O(l)).required)!==null&&Le!==void 0?Le:!1:re(r==null?void 0:r.schema)&&(We=($e=(rn=r==null?void 0:r.schema).describe)===null||$e===void 0?void 0:$e.call(rn).required)!==null&&We!==void 0?We:!1}),q=i++,Y=Ne({id:q,path:l,touched:!1,pending:!1,valid:!0,validated:!!(!((o=de[D])===null||o===void 0)&&o.length),required:T,initialValue:b,errors:Gn([]),bails:(f=r==null?void 0:r.bails)!==null&&f!==void 0?f:!1,label:r==null?void 0:r.label,type:(r==null?void 0:r.type)||"default",value:W,multiple:!1,__flags:{pendingUnmount:{[q]:!1},pendingReset:!1},fieldsCount:1,validate:r==null?void 0:r.validate,dirty:k(()=>!L(I(W),I(b)))});return s.value.push(Y),g.value[D]=Y,F(),j.value[D]&&!de[D]&&ae(()=>{ye(D,{mode:"silent"})}),Fe(l)&&ue(l,te=>{F();const Oe=C(W.value);g.value[te]=Y,ae(()=>{x(c,te,Oe)})}),Y}const Z=dn(tn,5),fe=dn(tn,5),se=He(async l=>await(l==="silent"?Z():fe()),(l,[r])=>{const o=ne(S.errorBag.value),b=[...new Set([...ne(l.results),...s.value.map(p=>p.path),...o])].sort().reduce((p,P)=>{var W;const D=P,H=$(D)||ke(D),T=((W=l.results[D])===null||W===void 0?void 0:W.errors)||[],q=O(H==null?void 0:H.path)||D,Y=Mt({errors:T,valid:!T.length},p.results[q]);return p.results[q]=Y,Y.valid||(p.errors[q]=Y.errors[0]),H&&V.value[q]&&delete V.value[q],H?(H.valid=Y.valid,r==="silent"||r==="validated-only"&&!H.validated||_(H,Y.errors),p):(_(q,T),p)},{valid:l.valid,results:{},errors:{}});return l.values&&(b.values=l.values),b});function ve(l){s.value.forEach(l)}function $(l){const r=typeof l=="string"?Ae(l):l;return typeof r=="string"?g.value[r]:r}function ke(l){return s.value.filter(o=>l.startsWith(o.path)).reduce((o,f)=>o?f.path.length>o.path.length?f:o:f,void 0)}let he=[],me;function Ve(l){return he.push(l),me||(me=ae(()=>{[...he].sort().reverse().forEach(o=>{sn(c,o)}),he=[],me=null})),me}function Ee(l){return function(o,f){return function(p){return p instanceof Event&&(p.preventDefault(),p.stopPropagation()),ve(P=>P.touched=!0),a.value=!0,d.value++,ge().then(P=>{const W=C(c);if(P.valid&&typeof o=="function"){const D=C(N.value);let H=l?D:W;return P.values&&(H=P.values),o(H,{evt:p,controlledValues:D,setErrors:B,setFieldError:_,setTouched:Ue,setFieldTouched:ee,setValues:ce,setFieldValue:R,resetForm:Be,resetField:en})}!P.valid&&typeof f=="function"&&f({values:W,evt:p,errors:P.errors,results:P.results})}).then(P=>(a.value=!1,P),P=>{throw a.value=!1,P})}}}const G=Ee(!1);G.withControlled=Ee(!0);function Te(l,r){const o=s.value.findIndex(b=>b.path===l&&(Array.isArray(b.id)?b.id.includes(r):b.id===r)),f=s.value[o];if(!(o===-1||!f)){if(ae(()=>{ye(l,{mode:"silent",warn:!1})}),f.multiple&&f.fieldsCount&&f.fieldsCount--,Array.isArray(f.id)){const b=f.id.indexOf(r);b>=0&&f.id.splice(b,1),delete f.__flags.pendingUnmount[r]}(!f.multiple||f.fieldsCount<=0)&&(s.value.splice(o,1),nn(l),F(),delete g.value[l])}}function m(l){ne(g.value).forEach(r=>{r.startsWith(l)&&delete g.value[r]}),s.value=s.value.filter(r=>!r.path.startsWith(l)),ae(()=>{F()})}const S={formId:t,values:c,controlledValues:N,errorBag:ie,errors:j,schema:E,submitCount:d,meta:w,isSubmitting:a,isValidating:u,fieldArrays:h,keepValuesOnUnmount:oe,validateSchema:I(E)?se:void 0,validate:ge,setFieldError:_,validateField:ye,setFieldValue:R,setValues:ce,setErrors:B,setFieldTouched:ee,setTouched:Ue,resetForm:Be,resetField:en,handleSubmit:G,useFieldModel:Pn,defineInputBinds:Mn,defineComponentBinds:Rn,defineField:ze,stageInitialValue:Cn,unsetInitialValue:nn,setFieldInitialValue:De,createPathState:z,getPathState:$,unsetPathValue:Ve,removePathState:Te,initialValues:y,getAllPathStates:()=>s.value,destroyPath:m,isFieldTouched:wn,isFieldDirty:Fn,isFieldValid:Nn};function R(l,r,o=!0){const f=C(r),b=typeof l=="string"?l:l.path;$(b)||z(b),x(c,b,f),o&&ye(b)}function M(l,r=!0){ne(c).forEach(o=>{delete c[o]}),ne(l).forEach(o=>{R(o,l[o],!1)}),r&&ge()}function ce(l,r=!0){Se(c,l),h.forEach(o=>o&&o.reset()),r&&ge()}function le(l,r){const o=$(O(l))||z(l);return k({get(){return o.value},set(f){var b;const p=O(l);R(p,f,(b=O(r))!==null&&b!==void 0?b:!1)}})}function ee(l,r){const o=$(l);o&&(o.touched=r)}function wn(l){const r=$(l);return r?r.touched:s.value.filter(o=>o.path.startsWith(l)).some(o=>o.touched)}function Fn(l){const r=$(l);return r?r.dirty:s.value.filter(o=>o.path.startsWith(l)).some(o=>o.dirty)}function Nn(l){const r=$(l);return r?r.valid:s.value.filter(o=>o.path.startsWith(l)).every(o=>o.valid)}function Ue(l){if(typeof l=="boolean"){ve(r=>{r.touched=l});return}ne(l).forEach(r=>{ee(r,!!l[r])})}function en(l,r){var o;const f=r&&"value"in r?r.value:U(y.value,l),b=$(l);b&&(b.__flags.pendingReset=!0),De(l,C(f),!0),R(l,f,!1),ee(l,(o=r==null?void 0:r.touched)!==null&&o!==void 0?o:!1),_(l,(r==null?void 0:r.errors)||[]),ae(()=>{b&&(b.__flags.pendingReset=!1)})}function Be(l,r){let o=C(l!=null&&l.values?l.values:v.value);o=r!=null&&r.force?o:Se(v.value,o),o=re(E)&&Q(E.cast)?E.cast(o):o,A(o),ve(f=>{var b;f.__flags.pendingReset=!0,f.validated=!1,f.touched=((b=l==null?void 0:l.touched)===null||b===void 0?void 0:b[f.path])||!1,R(f.path,U(o,f.path),!1),_(f.path,void 0)}),r!=null&&r.force?M(o,!1):ce(o,!1),B((l==null?void 0:l.errors)||{}),d.value=(l==null?void 0:l.submitCount)||0,ae(()=>{ge({mode:"silent"}),ve(f=>{f.__flags.pendingReset=!1})})}async function ge(l){const r=(l==null?void 0:l.mode)||"force";if(r==="force"&&ve(p=>p.validated=!0),S.validateSchema)return S.validateSchema(r);u.value=!0;const o=await Promise.all(s.value.map(p=>p.validate?p.validate(l).then(P=>({key:p.path,valid:P.valid,errors:P.errors})):Promise.resolve({key:p.path,valid:!0,errors:[]})));u.value=!1;const f={},b={};for(const p of o)f[p.key]={valid:p.valid,errors:p.errors},p.errors.length&&(b[p.key]=p.errors[0]);return{valid:o.every(p=>p.valid),results:f,errors:b}}async function ye(l,r){var o;const f=$(l);if(f&&(r==null?void 0:r.mode)!=="silent"&&(f.validated=!0),E){const{results:b}=await se((r==null?void 0:r.mode)||"validated-only");return b[l]||{errors:[],valid:!0}}return f!=null&&f.validate?f.validate(r):(!f&&(o=r==null?void 0:r.warn),Promise.resolve({errors:[],valid:!0}))}function nn(l){sn(y.value,l)}function Cn(l,r,o=!1){De(l,r),x(c,l,r),o&&!(e!=null&&e.initialValues)&&x(v.value,l,C(r))}function De(l,r,o=!1){x(y.value,l,C(r)),o&&x(v.value,l,C(r))}async function tn(){const l=I(E);if(!l)return{valid:!0,results:{},errors:{}};u.value=!0;const r=Ce(l)||re(l)?await Vt(l,c):await Ot(l,c,{names:J.value,bailsMap:K.value});return u.value=!1,r}const In=G((l,{evt:r})=>{it(r)&&r.target.submit()});hn(()=>{if(e!=null&&e.initialErrors&&B(e.initialErrors),e!=null&&e.initialTouched&&Ue(e.initialTouched),e!=null&&e.validateOnMount){ge();return}S.validateSchema&&S.validateSchema("silent")}),Fe(E)&&ue(E,()=>{var l;(l=S.validateSchema)===null||l===void 0||l.call(S,"validated-only")}),mn(Me,S);function ze(l,r){const o=Q(r)||r==null?void 0:r.label,f=$(O(l))||z(l,{label:o}),b=()=>Q(r)?r(je(f,we)):r||{};function p(){var T;f.touched=!0,((T=b().validateOnBlur)!==null&&T!==void 0?T:_e().validateOnBlur)&&ye(f.path)}function P(){var T;((T=b().validateOnInput)!==null&&T!==void 0?T:_e().validateOnInput)&&ae(()=>{ye(f.path)})}function W(){var T;((T=b().validateOnChange)!==null&&T!==void 0?T:_e().validateOnChange)&&ae(()=>{ye(f.path)})}const D=k(()=>{const T={onChange:W,onInput:P,onBlur:p};return Q(r)?Object.assign(Object.assign({},T),r(je(f,we)).props||{}):r!=null&&r.props?Object.assign(Object.assign({},T),r.props(je(f,we))):T});return[le(l,()=>{var T,q,Y;return(Y=(T=b().validateOnModelUpdate)!==null&&T!==void 0?T:(q=_e())===null||q===void 0?void 0:q.validateOnModelUpdate)!==null&&Y!==void 0?Y:!0}),D]}function Pn(l){return Array.isArray(l)?l.map(r=>le(r,!0)):le(l)}function Mn(l,r){const[o,f]=ze(l,r);function b(){f.value.onBlur()}function p(W){const D=Ie(W);R(O(l),D,!1),f.value.onInput()}function P(W){const D=Ie(W);R(O(l),D,!1),f.value.onChange()}return k(()=>Object.assign(Object.assign({},f.value),{onBlur:b,onInput:p,onChange:P,value:o.value}))}function Rn(l,r){const[o,f]=ze(l,r),b=$(O(l));function p(P){o.value=P}return k(()=>{const P=Q(r)?r(je(b,we)):r||{};return Object.assign({[P.model||"modelValue"]:o.value,[`onUpdate:${P.model||"modelValue"}`]:p},f.value)})}return Object.assign(Object.assign({},S),{values:Wn(c),handleReset:()=>Be(),submitForm:In})}function It(e,n,t,i){const a={touched:"some",pending:"some",valid:"every"},u=k(()=>!L(n,I(t)));function d(){const c=e.value;return ne(a).reduce((s,V)=>{const g=a[V];return s[V]=c[g](F=>F[V]),s},{})}const h=Ne(d());return qn(()=>{const c=d();h.touched=c.touched,h.valid=c.valid,h.pending=c.pending}),k(()=>Object.assign(Object.assign({initialValues:I(t)},h),{valid:h.valid&&!ne(i.value).length,dirty:u.value}))}function Pt(e,n,t){const i=jn(t),a=X(i),u=X(C(i));function d(h,c=!1){a.value=Se(C(a.value)||{},C(h)),u.value=Se(C(u.value)||{},C(h)),c&&e.value.forEach(s=>{if(s.touched)return;const g=U(a.value,s.path);x(n,s.path,C(g))})}return{initialValues:a,originalInitialValues:u,setInitialValues:d}}function Mt(e,n){return n?{valid:e.valid&&n.valid,errors:[...e.errors,...n.errors]}:e}function Bt(e){const n=Qe(Me,void 0),t=X([]),i=()=>{},a={fields:t,remove:i,push:i,swap:i,insert:i,update:i,replace:i,prepend:i,move:i};if(!n||!I(e))return a;const u=n.fieldArrays.find(y=>I(y.path)===I(e));if(u)return u;let d=0;function h(){return U(n==null?void 0:n.values,O(e),[])||[]}function c(){const y=h();Array.isArray(y)&&(t.value=y.map((v,A)=>V(v,A,t.value)),s())}c();function s(){const y=t.value.length;for(let v=0;v<y;v++){const A=t.value[v];A.isFirst=v===0,A.isLast=v===y-1}}function V(y,v,A){if(A&&!be(v)&&A[v])return A[v];const w=d++;return{key:w,value:at({get(){const E=U(n==null?void 0:n.values,O(e),[])||[],z=t.value.findIndex(Z=>Z.key===w);return z===-1?y:E[z]},set(E){const z=t.value.findIndex(Z=>Z.key===w);z!==-1&&J(z,E)}}),isFirst:!1,isLast:!1}}function g(){s(),n==null||n.validate({mode:"silent"})}function F(y){const v=O(e),A=U(n==null?void 0:n.values,v);if(!A||!Array.isArray(A))return;const w=[...A];w.splice(y,1);const N=v+`[${y}]`;n.destroyPath(N),n.unsetInitialValue(N),x(n.values,v,w),t.value.splice(y,1),g()}function _(y){const v=C(y),A=O(e),w=U(n==null?void 0:n.values,A),N=be(w)?[]:w;if(!Array.isArray(N))return;const E=[...N];E.push(v),n.stageInitialValue(A+`[${E.length-1}]`,v),x(n.values,A,E),t.value.push(V(v)),g()}function B(y,v){const A=O(e),w=U(n==null?void 0:n.values,A);if(!Array.isArray(w)||!(y in w)||!(v in w))return;const N=[...w],E=[...t.value],z=N[y];N[y]=N[v],N[v]=z;const Z=E[y];E[y]=E[v],E[v]=Z,x(n.values,A,N),t.value=E,s()}function ie(y,v){const A=C(v),w=O(e),N=U(n==null?void 0:n.values,w);if(!Array.isArray(N)||N.length<y)return;const E=[...N],z=[...t.value];E.splice(y,0,A),z.splice(y,0,V(A)),x(n.values,w,E),t.value=z,g()}function j(y){const v=O(e);n.stageInitialValue(v,y),x(n.values,v,y),c(),g()}function J(y,v){const A=O(e),w=U(n==null?void 0:n.values,A);!Array.isArray(w)||w.length-1<y||(x(n.values,`${A}[${y}]`,v),n==null||n.validate({mode:"validated-only"}))}function K(y){const v=C(y),A=O(e),w=U(n==null?void 0:n.values,A),N=be(w)?[]:w;if(!Array.isArray(N))return;const E=[v,...N];x(n.values,A,E),n.stageInitialValue(A+"[0]",v),t.value.unshift(V(v)),g()}function de(y,v){const A=O(e),w=U(n==null?void 0:n.values,A),N=be(w)?[]:[...w];if(!Array.isArray(w)||!(y in w)||!(v in w))return;const E=[...t.value],z=E[y];E.splice(y,1),E.splice(v,0,z);const Z=N[y];N.splice(y,1),N.splice(v,0,Z),x(n.values,A,N),t.value=E,g()}const oe={fields:t,remove:F,push:_,swap:B,insert:ie,update:J,replace:j,prepend:K,move:de};return n.fieldArrays.push(Object.assign({path:e,reset:c},oe)),yn(()=>{const y=n.fieldArrays.findIndex(v=>O(v.path)===O(e));y>=0&&n.fieldArrays.splice(y,1)}),ue(h,y=>{const v=t.value.map(A=>A.value);L(y,v)||c()}),oe}export{kt as V,Tt as a,Bt as b,Ut as u};
