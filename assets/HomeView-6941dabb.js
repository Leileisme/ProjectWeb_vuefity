import{y as me,z as ye,Q as he,A as ge,o as i,B as m,R as we,S as xe,D as r,H as u,v as e,F as l,N as S,J as w,T as d,I as D,G as n,U as Ee,W as Te,E as V,K as Ie,X as ke,Y as A,L as b,Z as N,_ as P,P as c,M as Ce,$ as Se,a0 as De}from"./index-7162acbb.js";import"./mitt-43e253ae.js";import{_ as Ve}from"./InfoAll-12ec0fca.js";import{S as R}from"./swiper-bundle-f8b0b54a.js";import{_ as Ae}from"./_plugin-vue_export-helper-c27b6911.js";import{V as be}from"./VContainer-a47efa6f.js";import{V as y}from"./VRow-69a15c63.js";import{V as s}from"./VCol-c17ef395.js";import{V as Le}from"./VSelect-b1912387.js";import{V as L}from"./VDivider-afb2ea39.js";import"./VList-8a3617d6.js";import"./VListItem-acfdb333.js";import"./ssrBoot-a43e3875.js";import"./VMenu-da930945.js";import"./VSlideGroup-ed428076.js";const $=I=>(Se("data-v-d939d48c"),I=I(),De(),I),$e={class:"swiper-wrapper"},Me=$(()=>d("div",{class:"swiper-pagination"},null,-1)),Be={class:"swiper-wrapper"},Fe=["onClick"],ze={key:0,class:"me-2"},Ne={key:1,class:"me-2"},Pe={style:{color:"#25ECE0"},class:"me-1"},Re=$(()=>d("span",{style:{color:"#25ECE0"}},"開始",-1)),Ge={style:{position:"absolute","background-color":"#fff",top:"5px",left:"5px",width:"50px",height:"50px","font-weight":"900"},class:"rounded-lg text-center"},He={style:{width:"100%",height:"55%","background-color":"red","font-size":"0.9rem","line-height":"1.8rem"},class:"rounded-t-lg"},Ke={style:{color:"#000","margin-top":"-2px"}},Ue=$(()=>d("div",{class:"swiper-pagination"},null,-1)),Ye={class:"me-1"},We=$(()=>d("span",null,"～",-1)),Xe={key:1,style:{color:"#25ECE0"}},je={key:1,style:{color:"#25ECE0","padding-bottom":"100px"}},Je={__name:"HomeView",setup(I){const{apiAuth:G}=ke(),k=me();ye(),he();const{xs:H,sm:K}=ge(),f=i(()=>H.value),M=i(()=>K.value),x=m(),U=m(""),h=m(),Y=["臺北市","新北市","桃園市","臺中市","臺南市","高雄市","新竹縣","苗栗縣","彰化縣","南投縣","雲林縣","嘉義縣","屏東縣","宜蘭縣","花蓮縣","臺東縣","澎湖縣","金門縣","連江縣","基隆市","新竹市","嘉義市"],g=m(5),F=()=>{g.value+=5};i(()=>T.value.slice().sort((v,a)=>{const t=v.DATE.split(" ")[0],o=a.DATE.split(" ")[0];return new Date(t)-new Date(o)}));const W=i(()=>T.value.slice().reverse()),X=i(()=>[...T.value].sort(()=>Math.random()-.5)),j=i(()=>[...T.value].sort(()=>Math.random()-.5)),E=i(()=>X.value.filter(v=>{let a=!0;x.value&&(a=v.TITLE.includes(x.value));let t=!0;return h.value&&(t=v.CITY===h.value),a&&t}));we([x,h],()=>{g.value=5});const J=i(()=>f.value?"max-width: calc(100vw - 30px);":M.value?"max-width: 600px ;":"max-width:800px;"),O=i(()=>(f.value,12)),Q=i(()=>f.value?5:3),Z=i(()=>f.value?7:9),C=m(!1),z=m(""),q=()=>{C.value=!1},ee=i(()=>f.value?"height: 250px;width: calc(100vw - 30px);":M.value?"height: 400px;max-width:calc(85vw) ;":"height: 400px;max-width:745px;"),te=i(()=>f.value?"height: 180px;width: calc(100vw - 30px);":M.value?"height: 300px;max-width:85vw ;":"height: 300px;max-width:745px;"),le=i(()=>f.value?"height: 110px;":"height: 200px;"),T=m([]),se=async v=>{var a,t;try{const{data:o}=await G.get("/events/getEventAll");T.value=o.result}catch(o){console.log(o);const _=((t=(a=o==null?void 0:o.response)==null?void 0:a.data)==null?void 0:t.message)||"發生錯誤，請稍後再試";z.value=_,C.value=!0}},p=v=>{const a=v.split(" "),t=a[0].split("/"),o=a[1].split(" "),_=a[2].split(" "),ae=t[0],oe=t[1].padStart(2,"0")+"."+t[2].padStart(2,"0"),ne=o[0].slice(0,2)+":"+o[0].slice(2),ce=_[0].slice(0,2)+":"+_[0].slice(2),re=t[1],de=t[2],ie=t[1].padStart(2,"0")+"/"+t[2].padStart(2,"0"),ue=B=>B.replace(/\//g,"-"),pe=B=>{const _e=new Date(B);return["日","一","二","三","四","五","六"][_e.getDay()]},fe=ue(a[0]),ve=pe(fe);return{year:ae,monthDay:oe,monthDay2:ie,week:ve,startTime:ne,endTime:ce,month:re,day:de}};return xe(async()=>{await se(),new R(".mySwiper",{spaceBetween:30,pagination:{el:".swiper-pagination",clickable:!0},autoplay:{delay:5e3}}),new R(".mySwiper2",{slidesPerView:2,spaceBetween:30,freeMode:!0,pagination:{el:".swiper-pagination",clickable:!0}})}),(v,a)=>(r(),u(w,null,[e(be,{class:"d-flex justify-center",style:S([{position:"relative"},J.value])},{default:l(()=>[e(y,null,{default:l(()=>[e(s,{cols:"12"},{default:l(()=>[d("div",null,[d("div",{class:"swiper swiper1 mySwiper",style:S(ee.value)},[d("div",$e,[(r(!0),u(w,null,D(j.value.slice(0,5),(t,o)=>(r(),u("div",{class:"swiper-slide",key:o,style:{cursor:"pointer"}},[e(A,{cover:"",src:t.IMAGE,style:{height:"100%"},onClick:_=>b(k).push(`/event/${t._id}`)},null,8,["src","onClick"])]))),128))]),Me],4)])]),_:1}),e(s,{cols:"12",style:{"padding-bottom":"0"}},{default:l(()=>[n("最新活動")]),_:1}),e(s,{cols:"12",style:{"padding-left":"0","padding-right":"0"}},{default:l(()=>[d("div",null,[d("div",{class:"swiper mySwiper2 swiper2",style:S(te.value)},[d("div",Be,[(r(!0),u(w,null,D(W.value.slice(0,8),(t,o)=>(r(),u("div",{key:o,class:"swiper-slide swiper-slide2",onClick:_=>b(k).push(`/event/${t._id}`)},[e(N,{width:"100%",class:"rounded-lg",style:{position:"relative",cursor:"pointer"}},{default:l(()=>[e(P,{style:{padding:"0"}},{default:l(()=>[e(y,{style:{margin:"0",padding:"0"}},{default:l(()=>[e(s,{cols:"12",style:S([{margin:"0",padding:"0",width:"100%"},le.value])},{default:l(()=>[e(A,{src:t.IMAGE,cover:""},null,8,["src"])]),_:2},1032,["style"]),e(s,{cols:"11"},{default:l(()=>[f.value?(r(),u("span",ze,c(t.TITLE.length>10?t.TITLE.substring(0,15)+"...":t.TITLE),1)):(r(),u("span",Ne,c(t.TITLE),1)),d("span",Pe,c(p(t.DATE).startTime),1),Re]),_:2},1024),d("div",Ge,[d("div",He,c(p(t.DATE).month)+"月 ",1),d("div",Ke,c(p(t.DATE).day),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024)],8,Fe))),128))]),Ue],4)])]),_:1}),e(s,{cols:"12",style:{"padding-bottom":"0"}},{default:l(()=>[n("所有活動")]),_:1}),e(s,{cols:"8"},{default:l(()=>[e(Ee,{modelValue:x.value,"onUpdate:modelValue":a[0]||(a[0]=t=>x.value=t),label:"活動名稱","prepend-inner-icon":"mdi-magnify","single-line":"",variant:"outlined","hide-details":"",density:"compact",onInput:U.value},null,8,["modelValue","onInput"])]),_:1}),e(s,{cols:"4",style:{"padding-left":"0"}},{default:l(()=>[e(Le,{modelValue:h.value,"onUpdate:modelValue":a[1]||(a[1]=t=>h.value=t),items:Y,density:"compact",color:"#25ECE0",label:"地區",variant:"outlined",onKeydown:a[2]||(a[2]=Te(t=>h.value=null,["delete"]))},null,8,["modelValue"])]),_:1}),f.value?(r(),u(w,{key:0},[(r(!0),u(w,null,D(E.value.slice(0,g.value),(t,o)=>(r(),V(s,{cols:O.value,key:o},{default:l(()=>[e(N,{class:"rounded-lg",onClick:_=>b(k).push(`/event/${t._id}`)},{default:l(()=>[e(P,{style:{"padding-left":"0","padding-top":"0","padding-bottom":"0"}},{default:l(()=>[e(y,{style:{margin:"0"}},{default:l(()=>[e(s,{cols:Q.value,class:"text-center",style:{padding:"0",height:"160px"}},{default:l(()=>[e(A,{src:t.IMAGE,cover:"","aspect-ratio":"1"},null,8,["src"])]),_:2},1032,["cols"]),e(s,{cols:Z.value},{default:l(()=>[e(y,null,{default:l(()=>[e(s,{cols:"12",style:{"font-size":"1.2rem","font-weight":"600","padding-bottom":"5px"}},{default:l(()=>[n(c(t.TITLE),1)]),_:2},1024),e(s,{cols:"12",style:{"padding-top":"0","padding-bottom":"5px",color:"#aaa"}},{default:l(()=>[d("span",Ye,c(p(t.DATE).monthDay2)+" ("+c(p(t.DATE).week)+")",1),d("span",null,c(p(t.DATE).startTime),1),We,d("span",null,c(p(t.DATE).endTime),1)]),_:2},1024),e(s,{cols:"12",style:{color:"#25ECE0","padding-top":"0"}},{default:l(()=>[e(Ce,{style:{"font-size":"0.9rem"},class:"me-1"},{default:l(()=>[n("mdi-map-marker")]),_:1}),d("span",null,c(t.CITY),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["cols"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1032,["cols"]))),128)),e(s,{cols:"12",style:{color:"#FF3333","text-align":"right","padding-top":"10px","font-size":"1.2rem"}},{default:l(()=>[E.value.length>g.value?(r(),u("span",{key:0,class:"pe-2",style:{cursor:"pointer"},onClick:F},"and more")):(r(),u("span",Xe,"已經到底了（;≧皿≦）"))]),_:1})],64)):(r(),V(s,{key:1,cols:"12",class:"text-center"},{default:l(()=>[e(y,null,{default:l(()=>[e(s,{cols:"12",style:{}},{default:l(()=>[e(y,null,{default:l(()=>[e(s,{cols:"1"},{default:l(()=>[n("項次")]),_:1}),e(s,{cols:"1"},{default:l(()=>[n("海報")]),_:1}),e(s,{cols:"3"},{default:l(()=>[n("活動名稱")]),_:1}),e(s,{cols:"1"},{default:l(()=>[n("活動日期")]),_:1}),e(s,{cols:"1"},{default:l(()=>[n("開始時間")]),_:1}),e(s,{cols:"1"},{default:l(()=>[n("結束時間")]),_:1}),e(s,{cols:"2"},{default:l(()=>[n("地區")]),_:1}),e(s,{cols:"2"},{default:l(()=>[n("預售票")]),_:1}),e(L,{color:"#fff",class:"border-opacity-50"})]),_:1})]),_:1}),(r(!0),u(w,null,D(E.value.slice(0,g.value),(t,o)=>(r(),V(s,{key:o,cols:"12",style:{"padding-top":"0px","padding-bottom":"0px",color:"#aaa"},class:"hoverClass",onClick:_=>b(k).push(`/event/${t._id}`)},{default:l(()=>[e(L,{color:"#fff",class:"border-opacity-50"}),e(y,{class:"d-flex align-center",style:{"padding-top":"20px","padding-bottom":"20px"}},{default:l(()=>[e(s,{cols:"1"},{default:l(()=>[n(c(o+1),1)]),_:2},1024),e(s,{cols:"1"},{default:l(()=>[e(A,{src:t.IMAGE,cover:"","aspect-ratio":"1"},null,8,["src"])]),_:2},1024),e(s,{cols:"3",style:{}},{default:l(()=>[n(c(t.TITLE),1)]),_:2},1024),e(s,{cols:"1"},{default:l(()=>[n(c(p(t.DATE).monthDay2),1)]),_:2},1024),e(s,{cols:"1"},{default:l(()=>[n(c(p(t.DATE).startTime),1)]),_:2},1024),e(s,{cols:"1"},{default:l(()=>[n(c(p(t.DATE).endTime),1)]),_:2},1024),e(s,{cols:"2"},{default:l(()=>[n(c(t.CITY),1)]),_:2},1024),e(s,{cols:"2"},{default:l(()=>[n(c(t.PRE_SALE-t.TICKET.length)+" / "+c(t.PRE_SALE),1)]),_:2},1024)]),_:2},1024),e(L,{color:"#fff",class:"border-opacity-50"})]),_:2},1032,["onClick"]))),128)),E.value.length===0?(r(),V(s,{key:0,cols:"12",style:{"padding-bottom":"30px","padding-top":"30px",color:"#aaa"},class:"d-flex align-center"},{default:l(()=>[n("目前沒有活動")]),_:1})):Ie("",!0),e(L,{color:"#fff",class:"border-opacity-50"}),e(s,{cols:"12",style:{color:"#FF3333","text-align":"right","padding-top":"20px","font-size":"1.2rem"}},{default:l(()=>[E.value.length>g.value?(r(),u("span",{key:0,class:"me-2",style:{cursor:"pointer"},onClick:F},"and more")):(r(),u("span",je,"已經到底了（;≧皿≦）"))]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1},8,["style"]),e(Ve,{InfoSwitch:C.value,InfoText:z.value,closeInfo:q,"onUpdate:InfoSwitch":a[3]||(a[3]=t=>C.value=t)},null,8,["InfoSwitch","InfoText"])],64))}},pt=Ae(Je,[["__scopeId","data-v-d939d48c"]]);export{pt as default};
