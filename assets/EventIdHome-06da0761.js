import{y as D,D as d,E as y,F as t,v as e,_ as se,ac as P,Y as k,T,P as f,O as Z,G as n,Z as ae,z as ne,ad as re,x as ue,o as i,A as ie,B as c,S as ce,H as w,J as O,L as r,I as H,M as S,K as N,N as b}from"./index-7162acbb.js";import{_ as de}from"./EventInfo-1adfa806.js";import{V as U}from"./VRow-69a15c63.js";import{V as s}from"./VCol-c17ef395.js";import{_ as R}from"./InfoAll-12ec0fca.js";import{_ as fe}from"./EventSetList-74c484a9.js";import{V as z}from"./VContainer-a47efa6f.js";import{V as me,a as _e}from"./VMenu-da930945.js";import{V as pe}from"./VList-8a3617d6.js";import{V as Ee,a as G}from"./VTabs-af368581.js";import{V as ve}from"./VDivider-afb2ea39.js";import{V as Ie,a as K}from"./VWindowItem-f1cc8da8.js";import"./BlankLine-f22220c0.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./mitt-43e253ae.js";import"./VListItem-acfdb333.js";import"./VSlideGroup-ed428076.js";import"./ssrBoot-a43e3875.js";const Se={class:"me-2",style:{"font-size":"1.1rem"}},ye={class:"",style:{"font-size":"1rem"}},$={__name:"EventHostCard",props:{item:{type:Object,default:()=>({EMAIL:"",ROLE:"",SCHOOL_NAME:"",SCHOOL_CITY:"",USER_NAME:"",NICK_NAME:"",CLUB_TH:"",CLUB_CATEGORY:"",IMAGE:"",TICKET_CART:[],SCORES:"",NOTIFY:[],KEEP_POST:[],KEEP_EVENT:[],FANS:[],FOLLOW:[],IS_STUDENT:"",IS_ABLE:"",IS_ADMIN:"",DESCRIBE:""})}},setup(_){const p=D(),E=_,l=()=>{E.item.USER_NAME?p.push(`/${E.item.USER_NAME}`):console.error("props.item.USER_NAME is not defined or empty")};return(u,L)=>(d(),y(ae,{class:"rounded-lg",style:{"max-width":"400px"}},{default:t(()=>[e(se,null,{default:t(()=>[e(U,{style:{"padding-top":"3px","padding-bottom":"3px"},class:"d-flex align-center"},{default:t(()=>[e(s,{cols:"3"},{default:t(()=>[e(P,{size:"75",onClick:l,style:{cursor:"pointer"}},{default:t(()=>[e(k,{src:_.item.IMAGE,cover:""},null,8,["src"])]),_:1})]),_:1}),e(s,{cols:"9",style:{}},{default:t(()=>[e(U,null,{default:t(()=>[e(s,{cols:"8",class:"d-flex align-center",onClick:l,style:{cursor:"pointer",color:"#25ECE0"}},{default:t(()=>[T("span",Se,f(_.item.NICK_NAME),1),T("span",ye,"第"+f(_.item.CLUB_TH)+"屆",1)]),_:1}),e(s,{cols:"4",class:"d-flex align-center"},{default:t(()=>[e(Z,{color:"#1BBCA9",style:{height:"30px"}},{default:t(()=>[n("追蹤")]),_:1})]),_:1}),e(s,{cols:"10",style:{"padding-top":"0"}},{default:t(()=>[n(f(_.item.DESCRIBE),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},Te={class:"me-5"},Ce={class:"me-5"},ge={style:{"white-space":"pre-wrap"}},$e={__name:"EventIdHome",setup(_){const p=D(),E=ne(),l=re("routeEvent"),u=ue(),L=()=>{l.value.HOST.USER_NAME?p.push(`/${l.value.HOST.USER_NAME}`):console.error("goUserName is error")},j=i(()=>l.value.HOST._id===u._id||l.value.CO_ORGANIZER.some(m=>m._id===u._id)?!1:l.value.PRE_SALE-l.value.TICKET.length===0),F=i(()=>l.value.HOST._id===u._id||l.value.CO_ORGANIZER.some(m=>m._id===u._id)?"登記票券":l.value.PRE_SALE-l.value.TICKET.length===0?"預售票掃空":"馬上取票"),{xs:Y}=ie(),I=i(()=>Y.value),W=i(()=>I.value?80:85),J=i(()=>I.value?16/9:8/3),X=i(()=>I.value?3:2),q=i(()=>I.value?"margin-bottom:5px;":"margin-bottom:15px;"),v=c("one"),Q=i(()=>v.value==="one"?"color:#25ECE0; border:1.8px #25ECE0 solid;":"color:#fff; border:1.8px rgba(204,204,204,0.5) solid;"),ee=i(()=>v.value==="two"?"color:#25ECE0; border:1.8px #25ECE0 solid;":"color:#fff; border:1.8px rgba(204,204,204,0.5) solid;"),C=c(!1),te=c("已經取過票溜！"),V=c(!1),M=c("Sorry！榮譽積分不足～快參加活動賺積分(-`д´-)"),g=c(!1),le=c("ㄚ！晚了一步，預售票沒有啦～"),x=c(!1),B=c(""),h=()=>{C.value=!1,V.value=!1,x.value=!1,g.value=!1,p.push(`/event/${E.params.id}`)},oe=async()=>{var m,a;if(l.value.HOST._id===u._id||l.value.CO_ORGANIZER.some(o=>o._id===u._id)){p.push(`/event/${E.params.id}/ticketUsed`);return}if(u.SCORES<l.value.SCORE_VALUES)V.value=!0;else if(l.value.PRE_SALE-l.value.TICKET.length===0)g.value=!0;else if(l.value.TICKET.some(o=>o.USER._id===u._id))C.value=!0;else try{p.push(`/event/${E.params.id}/ticket`)}catch(o){console.log(o);const A=((a=(m=o==null?void 0:o.response)==null?void 0:m.data)==null?void 0:a.message)||"發生錯誤，請稍後再試";B.value=A,x.value=!0}};return ce(()=>{}),(m,a)=>(d(),w(O,null,[e(z,{style:{padding:"0","max-width":"800px"}},{default:t(()=>[e(s,{cols:"12",style:{padding:"0","padding-bottom":"12px"}},{default:t(()=>[e(k,{"aspect-ratio":J.value,cover:"",src:r(l).IMAGE,style:{display:""}},null,8,["aspect-ratio","src"])]),_:1}),e(z,null,{default:t(()=>[e(U,null,{default:t(()=>[e(s,{cols:"10",style:{}},{default:t(()=>[(d(!0),w(O,null,H(r(l).CATEGORY,(o,A)=>(d(),y(_e,{key:A,class:"me-2 custom-chip",color:"#25ECE0",label:"",small:""},{default:t(()=>[n(f(o),1)]),_:2},1024))),128))]),_:1}),e(s,{cols:"2",class:"d-flex justify-end"},{default:t(()=>[e(S,{style:{color:"#999"},class:"me-5"},{default:t(()=>[n("mdi-bookmark-multiple-outline")]),_:1}),e(S,{style:{color:"#999"}},{default:t(()=>[n("mdi-cards-heart-outline")]),_:1}),I.value?N("",!0):(d(),w(O,{key:0},[e(S,{class:"ms-5",style:{cursor:"pointer"},id:"setting"},{default:t(()=>[n("mdi-menu")]),_:1}),e(me,{activator:"#setting",width:"150",style:{"text-align":"center"}},{default:t(()=>[e(pe,null,{default:t(()=>[e(fe)]),_:1})]),_:1})],64))]),_:1}),e(s,{cols:X.value,class:"d-flex justify-center",style:{"background-color":""}},{default:t(()=>[e(P,{size:W.value,onClick:L,style:{cursor:"pointer"}},{default:t(()=>[e(k,{src:r(l).HOST.IMAGE,cover:""},null,8,["src"])]),_:1},8,["size"])]),_:1},8,["cols"]),e(s,{cols:"9",style:{"font-size":"1.5rem","font-weight":"900"},class:"d-flex align-center"},{default:t(()=>[n(f(r(l).TITLE),1)]),_:1}),e(s,{cols:"12",style:{color:"#999","padding-top":"0","padding-bottom":"0","font-size":"1rem"},class:"d-flex align-center justify-end"},{default:t(()=>[e(S,{style:{"font-size":"1.1rem"},class:"me-1"},{default:t(()=>[n("mdi-eye-outline ")]),_:1}),T("span",Te,f(r(l).REACH),1),e(S,{style:{"font-size":"1.1rem"},class:"me-1"},{default:t(()=>[n("mdi-cards-heart-outline")]),_:1}),T("span",Ce,f(r(l).LIKES.length),1),e(Z,{color:"#1BBCA9",style:{"font-weight":"900"},onClick:oe,disabled:j.value,class:"okBtn"},{default:t(()=>[n(f(F.value),1)]),_:1},8,["disabled"])]),_:1}),e(de),e(s,{cols:"12"},{default:t(()=>[e(Ee,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=o=>v.value=o),"align-tabs":"start"},{default:t(()=>[e(G,{value:"one",class:"rounded-ts-xl me-2",style:b([{"min-width":"80px"},Q.value])},{default:t(()=>[n("活動內容")]),_:1},8,["style"]),e(G,{value:"two",class:"rounded-ts-xl me-2",style:b([{"min-width":"80px"},ee.value])},{default:t(()=>[n("直播/動態")]),_:1},8,["style"])]),_:1},8,["modelValue"]),e(ve,{color:"#fff",class:"border-opacity-50"})]),_:1}),e(Ie,{modelValue:v.value,"onUpdate:modelValue":a[1]||(a[1]=o=>v.value=o),style:{width:"100%"}},{default:t(()=>[e(K,{value:"one"},{default:t(()=>[e(s,{cols:"12",style:{color:"#25ECE0","font-size":"0.9rem","font-weight":"bold","padding-bottom":"0px"}},{default:t(()=>[n("活動介紹")]),_:1}),e(s,{cols:"12"},{default:t(()=>[T("pre",ge,f(r(l).DESCRIPTION),1)]),_:1}),e(s,{cols:"12",style:{color:"#25ECE0","font-size":"0.9rem","font-weight":"bold","padding-bottom":"0px"}},{default:t(()=>[n("主辦單位")]),_:1}),e(s,{cols:"12"},{default:t(()=>[e($,{item:r(l).HOST},null,8,["item"])]),_:1}),r(l).CO_ORGANIZER.length>0?(d(),y(s,{key:0,cols:"12"})):N("",!0),r(l).CO_ORGANIZER.length>0?(d(),y(s,{key:1,cols:"12",style:{color:"#25ECE0","font-size":"0.9rem","font-weight":"bold","padding-bottom":"0px"}},{default:t(()=>[n("協辦單位")]),_:1})):N("",!0),(d(!0),w(O,null,H(r(l).CO_ORGANIZER,o=>(d(),y(s,{cols:"12",key:o._id},{default:t(()=>[e($,{item:o},null,8,["item"])]),_:2},1024))),128))]),_:1}),e(K,{value:"two"})]),_:1},8,["modelValue"]),e(s,{style:b(q.value)},null,8,["style"])]),_:1})]),_:1})]),_:1}),e(R,{InfoSwitch:V.value,InfoText:M.value,closeInfo:h,"onUpdate:InfoSwitch":a[2]||(a[2]=o=>M.value=o)},null,8,["InfoSwitch","InfoText"]),e(R,{InfoSwitch:C.value,InfoText:te.value,closeInfo:h,"onUpdate:InfoSwitch":a[3]||(a[3]=o=>C.value=o)},null,8,["InfoSwitch","InfoText"]),e(R,{InfoSwitch:g.value,InfoText:le.value,closeInfo:h,"onUpdate:InfoSwitch":a[4]||(a[4]=o=>g.value=o)},null,8,["InfoSwitch","InfoText"]),e(R,{InfoSwitch:x.value,InfoText:B.value,closeInfo:h,"onUpdate:InfoSwitch":a[5]||(a[5]=o=>x.value=o)},null,8,["InfoSwitch","InfoText"])],64))}};export{$e as default};
