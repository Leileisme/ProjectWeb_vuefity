import{y as Te,Q as Me,A as De,o as h,B as j,a1 as _e,a2 as k,a3 as ae,a4 as n,a5 as Le,D as v,H as te,E as p,F as o,K as c,T as g,N as oe,v as t,J as Ae,X as Ie,G as V,a6 as K,L as e,O as y,U as m,a7 as Re,$ as Oe,a0 as $e}from"./index-7162acbb.js";import{u as X,a as r,V as J}from"./vee-validate.esm-91aa4b5b.js";import{v as ue}from"./index-984551f1.js";import{U as d,V as Fe}from"./VDatePicker-1833dbe2.js";import{_ as Ge}from"./_plugin-vue_export-helper-c27b6911.js";import{V as qe,a as Ye}from"./VAppBarTitle-ebb9f6aa.js";import{V as se}from"./VContainer-a47efa6f.js";import{V as He,a as Q}from"./VWindowItem-f1cc8da8.js";import{V as Z}from"./VRow-69a15c63.js";import{V as f}from"./VCol-c17ef395.js";import{V as w}from"./VSelect-b1912387.js";import{V as Pe}from"./VMenu-da930945.js";import"./ssrBoot-a43e3875.js";import"./VList-8a3617d6.js";import"./VListItem-acfdb333.js";import"./VDivider-afb2ea39.js";import"./VSlideGroup-ed428076.js";const ee=B=>(Oe("data-v-59264e4c"),B=B(),$e(),B),je={key:0,style:{height:"65px",width:"100%","box-shadow":"0 1px 5px #000"},class:"d-flex justify-center align-center"},We=ee(()=>g("div",{class:"text-h5 font-weight-black"},"註冊",-1)),ze=[We],Ke=ee(()=>g("div",{class:"mb-1 mt-3"},[g("div",{class:"text-center font-weight-bold text-h3"},"LogoHere"),g("div",{class:"text-center mt-5"},[g("p",null,"註冊馬上加入「學生社團」社群行列")])],-1)),Xe={class:"d-flex justify-center w-100 mx-auto"},Je=ee(()=>g("span",null,"已經有帳號?",-1)),Qe={__name:"RegisterView",setup(B){const{api:re}=Ie(),ne=Te(),le=Me(),{xs:ie}=De(),T=h(()=>ie.value),de=h(()=>T.value?"border: none; ":"border: 1px solid #333; box-shadow: 0 1px 10px #363636;"),me=h(()=>T.value?"height:auto":"height: 100vh; align-items: center;"),E=j("one"),M=j(!1),D=j(!1),C=_e({selected:null,items:[{text:"個人",value:"個人"},{text:"團體",value:"團體"}]}),ve={items:[{text:"學生",value:d.STUDENT},{text:"非學生",value:d.NOT_STUDENT}]},ce={items:[{text:"社團",value:d.CLUB}]},fe={items:["臺北市","新北市","桃園市","臺中市","臺南市","高雄市","新竹縣","苗栗縣","彰化縣","南投縣","雲林縣","嘉義縣","屏東縣","宜蘭縣","花蓮縣","臺東縣","澎湖縣","金門縣","連江縣","基隆市","新竹市","嘉義市"]},pe={items:["學術","學藝","音樂","康樂","服務","體育","康輔","聯誼","其他"]},ge={items:["生理女","生理男"]},be=["高一","高二","高三","大一","大二","大三","大四","碩士"],U=j(!1),Ve=new Date,xe=k({role:ae().required("請選擇註冊身分")}),W=X({validationSchema:xe}),u=r("role",void 0,{form:W}),ye=W.handleSubmit(async s=>{try{x.resetForm(),E.value="two"}catch(l){console.log(l)}}),Ee=k({email:n().required("信箱必填").max(40,"信箱長度不符").test("isEmail","信箱格式錯誤",s=>u.value.value===d.STUDENT&&!s.includes("edu")?!1:ue.isEmail(s)),studentNo:n().max(20,"學號長度不符").test("isStudentNo","學號必填",s=>!(u.value.value===d.STUDENT&&!s)),password:n().required("密碼必填").min(6,"密碼長度不符").max(20,"密碼長度不符"),passwordConfirm:n().required("密碼必填").min(6,"密碼長度不符").max(20,"密碼長度不符").oneOf([Le("password")],"密碼不一致")}),x=X({validationSchema:Ee}),_=r("email",void 0,{form:x}),L=r("studentNo",void 0,{form:x}),A=r("password",void 0,{form:x}),z=r("passwordConfirm",void 0,{form:x}),Ce=h(()=>u.value.value===d.STUDENT?"學生信箱":"信箱"),Ue=x.handleSubmit(async s=>{try{i.resetForm(),E.value="three"}catch(l){console.log(l)}}),he=k({schoolName:n().required("學校必填").max(20,"學校長度不符"),schoolCity:n().required("學校縣市必填").min(3,"學校縣市長度不符").max(3,"學校縣市長度不符"),realName:n().required("姓名/社團名必填").max(6,"姓名/社團名長度不符"),UserName:n().required("用戶名稱必填").max(12,"用戶名稱長度不符").matches(/^[a-zA-Z0-9]*$/,"用戶名稱格式錯誤,只能英文或數字"),nickName:n().max(6,"檔案暱稱長度不符"),BDAY:n().test("isBADY","出生日期必填",s=>!(u.value.value===!d.CLUB&&!s)),gender:n().min(3,"性別長度不符").max(3,"性別長度不符").test("isGender","性別必填",s=>!(u.value.value===!d.CLUB&&!s)),mobile:n().length(8,"手機長度不符").matches(/^[0-9]{8}$/,"手機格式錯誤").test("isMobile","手機必填",s=>!(u.value.value===!d.CLUB&&!s)),studentGrade:n().min(2,"年級長度不符").max(2,"年級長度不符").test("isStudentGrade","年級必填",s=>!(u.value.value===d.STUDENT&&!s)),emailUB:n().max(40,"備用信箱長度不符").test("isEmail","備用信箱格式錯誤",s=>s?ue.isEmail(s):!0),clubTh:ae().typeError("社團屆數必須是數字").test("isClubTh","社團屆數必填",s=>!(u.value.value===d.CLUB&&!s)),clubCoreMember:k().shape({value:k().shape({USER:n(),ROLE:n()})}),clubCategory:n().min(2,"社團類別不符").max(2,"社團類別不符").test("isClubTh","社團類別必填",s=>s!==void 0?!(u.value.value===d.CLUB&&!s):!0)}),i=X({validationSchema:he,initialValues:{emailUB:""}}),I=r("schoolName",void 0,{form:i}),R=r("schoolCity",void 0,{form:i}),S=r("realName",void 0,{form:i}),O=r("UserName",void 0,{form:i}),$=r("nickName",void 0,{form:i}),b=r("BDay",void 0,{form:i}),F=r("gender",void 0,{form:i}),G=r("mobile",void 0,{form:i}),q=r("studentGrade",void 0,{form:i}),Y=r("emailUB",void 0,{form:i}),H=r("clubTh",void 0,{form:i}),we=r("clubCoreMember",void 0,{form:i}),P=r("clubCategory",void 0,{form:i}),Se=h(()=>b.value.value?new Date(b.value.value).toLocaleDateString().substring(0,10):""),Ne=h(()=>u.value.value===d.CLUB?"社團名稱":"姓名"),ke=i.handleSubmit(async s=>{var l,a;try{await re.post("/users",{ROLE:u.value.value,EMAIL:_.value.value,PASSWORD:A.value.value,STUDENT_NO:L.value.value,SCHOOL_NAME:I.value.value,SCHOOL_CITY:R.value.value,REAL_NAME:S.value.value,USER_NAME:O.value.value,NICK_NAME:$.value.value||S.value.value,BDAY:b.value.value?new Date(b.value.value).toLocaleDateString().substring(0,10):b.value.value,GENDER:F.value.value,MOBILE:G.value.value,STUDENT_GRADE:q.value.value,EMAIL_UB:Y.value.value,CLUB_TH:H.value.value,CLUB_CORE_MEMBER:we.value.value,CLUB_CATEGORY:P.value.value,IS_STUDENT:u.value.value===d.STUDENT}),le({text:"註冊成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),ne.push("/login")}catch(N){console.log(N);const Be=((a=(l=N==null?void 0:N.response)==null?void 0:l.data)==null?void 0:a.message)||"發生錯誤，請稍後再試";le({text:Be,showCloseButton:!1,snackbarProps:{timeout:2e4,color:"red",location:"bottom"}})}});return(s,l)=>(v(),te(Ae,null,[T.value?(v(),p(qe,{key:0},{default:o(()=>[t(se,{class:"d-flex align-center text-center"},{default:o(()=>[t(Ye,{class:"font-weight-black text-h5"},{default:o(()=>[V("註冊")]),_:1})]),_:1})]),_:1})):c("",!0),g("div",{style:oe(me.value),class:"boxHeigh"},[g("div",{style:oe([{width:"400px"},de.value]),class:"pb-8"},[T.value?c("",!0):(v(),te("div",je,ze)),t(se,null,{default:o(()=>[Ke,g("div",Xe,[t(He,{modelValue:E.value,"onUpdate:modelValue":l[27]||(l[27]=a=>E.value=a),style:{width:"95%"},touch:!1},{default:o(()=>[t(J,{onSubmit:K(e(ye),["prevent"]),disabled:e(W).isSubmitting.value},{default:o(()=>[t(Q,{value:"one"},{default:o(()=>[t(Z,null,{default:o(()=>[t(f,{cols:"12",class:"mt-8"},{default:o(()=>[t(w,{modelValue:C.selected,"onUpdate:modelValue":[l[0]||(l[0]=a=>C.selected=a),l[1]||(l[1]=a=>e(u).value.value=void 0)],items:C.items,"item-title":"text","item-value":"value",label:"註冊單位",variant:"outlined",color:"#25ECE0"},null,8,["modelValue","items"])]),_:1}),t(f,{cols:"12"},{default:o(()=>[t(w,{modelValue:e(u).value.value,"onUpdate:modelValue":l[2]||(l[2]=a=>e(u).value.value=a),modelModifiers:{number:!0},items:C.selected==="個人"?ve.items:C.selected==="團體"?ce.items:[],"item-title":"text","item-value":"value",label:"註冊身分",variant:"outlined",color:"#25ECE0",disabled:!C.selected,"error-messages":e(u).errorMessage.value},null,8,["modelValue","items","disabled","error-messages"])]),_:1}),t(f,{cols:"12"},{default:o(()=>[t(y,{type:"submit",class:"mt-2 rounded-lg w-100",style:{"background-color":"#1BBCA9",height:"60px","font-weight":"900"}},{default:o(()=>[V(" 下一步 ")]),_:1})]),_:1}),t(f,{cols:"12",class:"text-center"},{default:o(()=>[Je,t(y,{type:"button",class:"rounded-lg mx-8",style:{"background-color":"#4F75D9","font-weight":"900",height:"42px",width:"25%"},to:"./login"},{default:o(()=>[V(" 登入 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit","disabled"]),t(J,{onSubmit:K(e(Ue),["prevent"]),disabled:e(x).isSubmitting.value},{default:o(()=>[t(Q,{value:"two"},{default:o(()=>[t(Z,null,{default:o(()=>[t(f,{cols:"12",class:"mt-8"},{default:o(()=>[t(m,{modelValue:e(_).value.value,"onUpdate:modelValue":l[3]||(l[3]=a=>e(_).value.value=a),"error-messages":e(_).errorMessage.value,label:Ce.value,type:"email",maxlength:"40",counter:"",variant:"outlined",color:"#25ECE0",density:"comfortable"},null,8,["modelValue","error-messages","label"]),e(u).value.value===e(d).STUDENT?(v(),p(m,{key:0,modelValue:e(L).value.value,"onUpdate:modelValue":l[4]||(l[4]=a=>e(L).value.value=a),"error-messages":e(L).errorMessage.value,label:"學號",maxlength:"20",counter:"",variant:"outlined",color:"#25ECE0",density:"comfortable"},null,8,["modelValue","error-messages"])):c("",!0),t(m,{modelValue:e(A).value.value,"onUpdate:modelValue":l[5]||(l[5]=a=>e(A).value.value=a),"error-messages":e(A).errorMessage.value,minlength:"6",maxlength:"20",counter:"",label:"密碼",variant:"outlined",density:"comfortable",color:"#25ECE0","append-inner-icon":M.value?"mdi-eye":"mdi-eye-off",type:M.value?"text":"password","onClick:appendInner":l[6]||(l[6]=a=>M.value=!M.value)},null,8,["modelValue","error-messages","append-inner-icon","type"]),t(m,{modelValue:e(z).value.value,"onUpdate:modelValue":l[7]||(l[7]=a=>e(z).value.value=a),"error-messages":e(z).errorMessage.value,minlength:"6",maxlength:"20",counter:"","append-inner-icon":D.value?"mdi-eye":"mdi-eye-off",type:D.value?"text":"password","onClick:appendInner":l[8]||(l[8]=a=>D.value=!D.value),label:"確認密碼",color:"#25ECE0",variant:"outlined",density:"comfortable"},null,8,["modelValue","error-messages","append-inner-icon","type"])]),_:1}),t(f,{cols:"4"},{default:o(()=>[t(y,{type:"button",block:"",class:"mt-2 rounded-lg",style:{"background-color":"#FF8484",height:"60px","font-weight":"900"},onClick:l[9]||(l[9]=a=>E.value="one")},{default:o(()=>[V(" 上一步 ")]),_:1})]),_:1}),t(f,{cols:"8"},{default:o(()=>[t(y,{type:"submit",block:"",class:"mt-2 rounded-lg",style:{"background-color":"#1BBCA9",height:"60px","font-weight":"900"}},{default:o(()=>[V(" 下一步 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit","disabled"]),t(J,{onSubmit:K(e(ke),["prevent"]),disabled:e(i).isSubmitting.value},{default:o(()=>[t(Q,{value:"three"},{default:o(()=>[t(Z,null,{default:o(()=>[t(f,{cols:"12",class:"mt-8"},{default:o(()=>[t(m,{modelValue:e(I).value.value,"onUpdate:modelValue":l[10]||(l[10]=a=>e(I).value.value=a),"error-messages":e(I).errorMessage.value,maxlength:"20",counter:"",color:"#25ECE0",label:"學校",variant:"outlined",density:"compact"},null,8,["modelValue","error-messages"]),t(w,{modelValue:e(R).value.value,"onUpdate:modelValue":l[11]||(l[11]=a=>e(R).value.value=a),"error-messages":e(R).errorMessage.value,items:fe.items,density:"compact",color:"#25ECE0",label:"學校縣市",variant:"outlined"},null,8,["modelValue","error-messages","items"]),t(m,{modelValue:e(S).value.value,"onUpdate:modelValue":l[12]||(l[12]=a=>e(S).value.value=a),label:Ne.value,"error-messages":e(S).errorMessage.value,maxlength:"6",counter:"",color:"#25ECE0",variant:"outlined",density:"compact"},null,8,["modelValue","label","error-messages"]),t(m,{modelValue:e(O).value.value,"onUpdate:modelValue":l[13]||(l[13]=a=>e(O).value.value=a),"error-messages":e(O).errorMessage.value,maxlength:"12",counter:"",color:"#25ECE0",label:"用戶名稱",variant:"outlined",density:"compact"},null,8,["modelValue","error-messages"]),e(u).value.value!==3?(v(),p(m,{key:0,modelValue:e($).value.value,"onUpdate:modelValue":l[14]||(l[14]=a=>e($).value.value=a),"error-messages":e($).errorMessage.value,maxlength:"6",counter:"",color:"#25ECE0",label:"檔案暱稱",variant:"outlined",density:"compact"},null,8,["modelValue","error-messages"])):c("",!0),e(u).value.value!==3?(v(),p(Pe,{key:1,modelValue:U.value,"onUpdate:modelValue":l[19]||(l[19]=a=>U.value=a),"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","min-width":"290px",class:"d-flex align-center justify-center"},{activator:o(({attrs:a})=>[t(m,Re({"model-value":Se.value,"error-messages":e(b).errorMessage.value,density:"compact",variant:"outlined",color:"#25ECE0",label:"出生日期","prepend-icon":"mdi-calendar",readonly:""},a,{onClick:l[15]||(l[15]=N=>U.value=!U.value)}),null,16,["model-value","error-messages"])]),default:o(()=>[t(Fe,{type:"date",color:"#25ECE0",max:e(Ve),modelValue:e(b).value.value,"onUpdate:modelValue":l[17]||(l[17]=a=>e(b).value.value=a),"no-time":"","no-title":"",onInput:l[18]||(l[18]=a=>U.value=!1)},{actions:o(()=>[t(y,{style:{"background-color":"#25ECE0",color:"rgb(0, 0, 0)","font-weight":"900"},onClick:l[16]||(l[16]=a=>U.value=!1)},{default:o(()=>[V("確定")]),_:1})]),_:1},8,["max","modelValue"])]),_:1},8,["modelValue"])):c("",!0),e(u).value.value!==3?(v(),p(w,{key:2,modelValue:e(F).value.value,"onUpdate:modelValue":l[20]||(l[20]=a=>e(F).value.value=a),"error-messages":e(F).errorMessage.value,items:ge.items,density:"compact",label:"性別",color:"#25ECE0",variant:"outlined"},null,8,["modelValue","error-messages","items"])):c("",!0),e(u).value.value!==3?(v(),p(m,{key:3,modelValue:e(G).value.value,"onUpdate:modelValue":l[21]||(l[21]=a=>e(G).value.value=a),"error-messages":e(G).errorMessage.value,maxlength:"8",label:"手機",prefix:"09",variant:"outlined",counter:"",color:"#25ECE0",density:"compact"},null,8,["modelValue","error-messages"])):c("",!0),e(u).value.value===1?(v(),p(w,{key:4,modelValue:e(q).value.value,"onUpdate:modelValue":l[22]||(l[22]=a=>e(q).value.value=a),"error-messages":e(q).errorMessage.value,items:be,minlength:"2",maxlength:"2",counter:"",label:"年級",color:"#25ECE0",variant:"outlined",density:"compact"},null,8,["modelValue","error-messages"])):c("",!0),e(u).value.value===3?(v(),p(w,{key:5,modelValue:e(P).value.value,"onUpdate:modelValue":l[23]||(l[23]=a=>e(P).value.value=a),"error-messages":e(P).errorMessage.value,items:pe.items,label:"社團類別",color:"#25ECE0",variant:"outlined",density:"compact"},null,8,["modelValue","error-messages","items"])):c("",!0),e(u).value.value===3?(v(),p(m,{key:6,modelValue:e(H).value.value,"onUpdate:modelValue":l[24]||(l[24]=a=>e(H).value.value=a),"error-messages":e(H).errorMessage.value,maxlength:"3",counter:"",color:"#25ECE0",label:"社團屆數",variant:"outlined",density:"compact"},null,8,["modelValue","error-messages"])):c("",!0),t(m,{modelValue:e(Y).value.value,"onUpdate:modelValue":l[25]||(l[25]=a=>e(Y).value.value=a),"error-messages":e(Y).errorMessage.value,maxlength:"40",counter:"",color:"#25ECE0",label:"備用信箱",variant:"outlined",density:"compact"},null,8,["modelValue","error-messages"])]),_:1}),t(f,{cols:"4"},{default:o(()=>[t(y,{type:"button",block:"",class:"mt-2 rounded-lg",style:{"background-color":"#FF8484",height:"60px","font-weight":"900"},onClick:l[26]||(l[26]=a=>E.value="two")},{default:o(()=>[V(" 上一步 ")]),_:1})]),_:1}),t(f,{cols:"8"},{default:o(()=>[t(y,{type:"submit",block:"",class:"mt-2 rounded-lg",style:{"background-color":"#1BBCA9",height:"60px","font-weight":"900"}},{default:o(()=>[V(" 註冊 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit","disabled"])]),_:1},8,["modelValue"])])]),_:1})],4)],4)],64))}},gl=Ge(Qe,[["__scopeId","data-v-59264e4c"]]);export{gl as default};
